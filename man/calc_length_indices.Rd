% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calc_length_indices.R
\name{calc_length_indices}
\alias{calc_length_indices}
\title{Calculate length based survey indices}
\usage{
calc_length_indices(Station, Stratas, SPECIES, lwcoeff, Sex, Length,
  Subsampling, std.towlength = 4, std.towwidth = 17, std.cv = 1,
  oracle = FALSE)
}
\arguments{
\item{Station}{A dataframe with station information. Required columns are
id (unique station id), year, towlength and strata (the strata identifyer).}

\item{Stratas}{A dataframe containing columns strata (the strata identifyer)
and area (the strata area).}

\item{SPECIES}{Species code}

\item{lwcoeff}{A vector of length 2, containing parameter
a and b of the length weight relationship.}

\item{Sex}{Specify sex (1 or 2) to limit calulation. Useful e.g. if one is interested
in calculatin indices for "Raudmagi" or "Grasleppa". If missing (default) one
gets the ususal non-sexed indices.}

\item{Length}{A dataframe with length frequency measurements. If missing (default)
the data are read in using fjolst::lesa.lengdir based on the id (synis.id) in
Station table. This is the recomended method, but if a length dataframe is passed to the
function the required columns are id (station id), length (the length class) and n 
(the number of fish measured), the latter not being raised.}

\item{Subsampling}{A dataframe containing a raising factor (r) for each sample
id (synis.id) for the SPECIES. If missing (default) the data are read using the
fjolst::lesa.numer based on the id (synis.id) in the Station table. This is the
recomended method.}

\item{std.towlength}{Standard tow length in nautical miles (default 4)}

\item{std.towwidth}{Standardized tow width in meters (defalt 17)}

\item{std.cv}{A multipler (default is 1) on the mean abundance/biomass if only one tow in
a strata. In such cases the cv is set equivalent to the "mean" value.}

\item{oracle}{A boolean, if FALSE (default) reads data from fjolst-package, if TRUE reads 
data from Oracle database}
}
\value{
Returns a \emph{list} with the following \emph{data.frame}s:
\itemize{
\item \code{base} that contains the statistics by each strata
\itemize{
\item \code{year}: Names/number of the strata
\item ... TODO
}
\item \code{aggr} The total survey index. The columns are:
\itemize{
\item \code{year}: Survey year
\item \code{length}: The length class
\item \code{n}: Abundance index for the given length class
\item \code{n.cv}: cv of the abundance index for a given length class
\item \code{b}: Biomass index for the given length class
\item \code{b.cv}: cv of the biomass index for a given length class
\item \code{cn}: Abundance index of fish smaller than or equal to a given
length class.
\item \code{cn.cv}: cv of the abundance index of fish smaller than or equal
to a given length class
\item \code{cb}: Biomass index of fish greater than or equal to a given
length class.
\item \code{cb.cv}: cv of the biomass index of fish greater than or equal
to a given length class
}
}
}
\description{
Calculates abundance and biomass survey indices based on length
classes for a particular species in a given year.

The minimum arguments needed are a Station table, a Strata table, Species code and
length-weight coefficient, with the rest of the data read in from fjolst.

The function does in principle three things
\itemize{
\item Standardizes value (e.g. number of fish) by tow length.
\item Calculates stratified indices.
\item Aggregates the stratified indices to the total area.
}
}
